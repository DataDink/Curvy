!function(){function a(a){var b={};for(var c in a)b[c]=a[c];return b}function b(a,b){return a&&a.__proto__&&a.__proto__.constructor===b?!0:a&&a.prototype&&a.prototype.constructor===b?!0:a&&a.constructor&&a.constructor===b?!0:(typeof a||"").toString().toLowerCase()===(b||"").toString().trim().toLowerCase()}function c(b){var c=this,d=window.Application.extend.register.clone();Object.defineProperty(this,"root",{value:b||document,configurable:!1,enumerable:!0}),Object.defineProperty(this,"register",{value:{instance:function(a,b){d.instance(a,b)},perApp:function(a,b){d.perApp(a,b)},perScope:function(a,b){d.perScope(a,b)},perResolve:function(a,b){d.perResolve(a,b)},dependencies:function(a){return d.dependencies(a)}},configurable:!1,enumerable:!0}),Object.freeze(c.register),Object.defineProperty(this,"resolve",{value:function(b,e){var f=a(e||{});return f.application=c,d.resolve(b,f)},configurable:!1,enumerable:!0});for(var f=0;f<e.length;f++)d.resolve(e[f],{application:c});Object.freeze(c)}function d(c,e,g,h){function i(a,c){function d(b){a.apply(this,b)}return a=b(a,Array)?a[a.length-1]:a,d.prototype=a.prototype,new d(c)}function j(a){if(b(a,Array)){for(var c=[],d=0;d<a.length&&b(a[d],String);d++)c.push(a[d].trim());return c}return k(a)}function k(a){var b=/^function[^\(]*\(([^\)]+)\)/gi.exec(a.toString());if(!b)return[];for(var c=b[1].split(","),d=0;d<c.length;d++)c[d]=c[d].trim();return c}function l(a,b){return n.registered(a)?a in c?c[a]:a in e?(c[a]=m(e[a],b),c[a]):m(g[a]||h[a],b):f}function m(a,b){for(var c=j(a),d=[],e=0;e<c.length;e++){var f=c[e];f in b?d.push(b[f]):f in h?d.push(l(f,b)):(b[f]=l(f,b),d.push(b[f]))}return i(a,d)}var n=this,c=a(c||{});n.instance=function(a,b){c[a]=b};var e=a(e||{});n.perApp=function(a,b){e[a]=b};var g=a(g||{});n.perScope=function(a,b){g[a]=b};var h=a(h||{});n.perResolve=function(a,b){h[a]=b},n.registered=function(a){return a in c||a in e||a in g||a in h},n.dependencies=function(a){return j(a)},n.resolve=function(c,d){var e=a(d||{});return b(c,String)?l(c,e):m(c,e)},n.clone=function(){return new d(c,e,g,h)},n.dispose=function(){if(n===window.Application.extend.register)throw"Can't dispose global container";c=f,e=f,g=f,h=f},Object.freeze(n)}Object.defineProperty(window,"Application",{value:c,configurable:!1,enumerable:!1});var e=[];window.Application.extend=function(a){e.push(a)},Object.defineProperty(window.Application.extend,"register",{value:new d,configurable:!1,enumerable:!0}),Object.freeze(window.Application);var f=function(a){return a}()}(),function(){var a=function(a){return a}();window.Application.extend.register.perApp("utilities",["application",function(b){var c=this;c.nothing=a,c.is=function(a,b){return a&&a.__proto__&&a.__proto__.constructor===b?!0:a&&a.prototype&&a.prototype.constructor===b?!0:a&&a.constructor&&a.constructor===b?!0:(typeof a||"").toString().toLowerCase()===(b||"").toString().trim().toLowerCase()},c.readonly=function(a,b,c){Object.defineProperty(a,b,{get:c,configurable:!1,enumerable:!0})},c.constant=function(a,b,c){Object.defineProperty(a,b,{value:c,configurable:!1,enumerable:!0})},c.path=function(b,c){for(var d=c.split(".")||[];b!=a&&d.length;)b=b[d.shift()];return b},c.watch=function(a,d,e){function f(a){return c.is(a,b.Observable)?a.watch(i,e):function(){}}var g=(d||"").split(".");if(!g.length)return function(){};var h=g.shift();if(!h)return function(){};var i=g.join("."),j=f(a[h]),k=function(b){b===h&&(j(),j=f(a[h]),e.call(a,h))};return a.observe(k),function(){a.unobserve(k),j()}},c.copy=function(a){var b={};for(var c in a)b[c]=a[c];return b},c.merge=function(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c},c.toarray=function(a){var b=[];if("length"in a)for(var c=0;c<a.length;c++)b.push(a[c]);else for(var c=0;c in a;c++)b.push(a[c]);return b},c.distinct=function(a){for(var b=0;b<a.length;b++)for(var c=b+1;c<a.length;c++)a[b]===a[c]&&a.splice(c--,1)},c.domdepth=function(a,b){return b=b||0,a?c.domdepth(a.parentNode,b+1):b},c.domsort=function(a){a=c.toarray(a);for(var b=0;b<a.length;b++)a[b]={n:a[b],d:c.domdepth(a[b])};a.sort(function(a,b){return a.d-b.d});for(var b=0;b<a.length;b++)a[b]=a[b].n;return a},c.domquery=function(a,b){var d=[];a.matches&&a.matches(b)&&d.push(a);for(var e=a.querySelectorAll?a.querySelectorAll(b):[],f=0;f<e.length;f++)d.push(e[f]);return c.domsort(d)},c.indom=function(a){var c=b.root.body&&b.root.body.contains?b.root.body:b.root;return!c.contains||c.contains(a)},Object.freeze(c)}]),Element.prototype.matches=Element.prototype.matches||Element.prototype.matchesSelector||function(a){if(this&&this.parentNode&&this.parentNode.querySelectorAll){for(var b=this.parentNode.querySelectorAll(a),c=0;b&&c<b.length;c++)if(b[c]===this)return!0;return!1}}}(),Application.extend(["application","utilities",function(a,b){function c(a){var c=[];h(a,"notify",function(a){for(var b=0;b<c.length;b++)c[b](a)}),h(a,"observe",function(a){c.push(a)}),h(a,"unobserve",function(a){c=c.filter(function(b){return b!==a})}),b.constant(a,"path",function(c){return b.path(a,c)}),i(a,"watch")||b.constant(a,"watch",function(c,d){return b.watch(a,c,d)}),h(a,"dispose",function(){c=nothing})}function d(a){for(var b in a)i(a,b)||f(a,b)}function e(a,b){for(var c in a)i(b,c)||g(b,a,c)}function f(a,b){var c=a[b];delete a[b],Object.defineProperty(a,b,{get:function(){return c},set:function(d){c=d,a.notify(b)},configurable:!1,enumerable:!0})}function g(a,b,c){Object.defineProperty(a,c,{get:function(){return b[c]},set:function(d){b[c]=d,a.notify(c)},configurable:!1,enumerable:!0})}function h(a,b,c){var d=a[b];Object.defineProperty(a,b,{value:function(){c.apply(this,arguments),d&&d.apply(this,arguments)},configurable:!1,enumerable:!0})}function i(a,b){return!(Object.getOwnPropertyDescriptor(a,b)||{configurable:!0}).configurable}a.Observable=function(e){for(var f=a.register.dependencies(e),g=0;g<f.length;g++)f[g]=a.resolve(f[g]);e=b.is(e,Array)?e.pop():e,e.apply(this,f),c(this),d(this),Object.freeze(this)},a.Observable.convert=function(b){return b.__proto__={constructor:a.Observable},c(b),d(b),Object.freeze(b),b},a.Observable.surrogate=function(b,d){return d=d||{},d.__proto__={constructor:a.Observable},c(d),e(b,d),Object.freeze(d),d},Object.freeze(a.Observable)}]),Application.extend.register.perApp("broadcast",function(){var a=this,b={};a.subscribe=function(a,c){b[a]=b[a]||[],b[a].push(c)},a.unsubscribe=function(a){for(var c in b)b[c]=b[c].filter(function(b){return b!==a})},a.send=function(a){for(var c=[],d=1;d<arguments.length;d++)c.push(arguments[d]);for(var e=b[a]||[],d=0;d<e.length;d++)e[d].apply(this,c)},Object.freeze(a)}),function(){function a(a,b,c,d){function e(a){for(var e=[],f=[],h=0;h<a.length;h++)g(e,a[h].addedNodes),g(f,a[h].removedNodes);d.distinct(f),c(f),d.distinct(e),b(e)}function f(){a.addEventListener("DOMNodeInserted",function(a){e([{addedNodes:[a.target]}])}),a.addEventListener("DOMNodeRemoved",function(a){e([{removedNodes:[a.target]}])}),e([{addedNodes:[a]}])}function g(a,b){for(var c=0;b&&c<b.length;c++)a.push(b[c])}!window.MutationObserver&&document.addEventListener?"complete"===document.readyState?f():document.onreadystatechange=function(){"complete"===this.readyState&&f()}:new MutationObserver(e).observe(a,{childList:!0,subtree:!0})}var b=" View ",c={};Object.defineProperty(Application.extend,"binding",{value:function(a,b,d){c[a]={ctr:b,prescan:d}},configurable:!1,enumerable:!0}),Application.extend(["application","utilities","broadcast",function(d,e,f){function g(a){a="element"in a?a.element:a;for(;a.parentNode&&!(b in a.parentNode);)a=a.parentNode;return a.parentNode?a.parentNode[b]:e.nothing}function h(a){var c="element"in a?a.element:a,d=e.toarray(c.querySelectorAll("*"));return d.filter(function(a){return a[b].parent===c[b]})}function i(a){var c=b in a?a[b]:a;c&&c.dispose&&c.dispose()}function j(a){for(var c=0;c<a.length;c++){var d=a[c];if(d.querySelectorAll){var f=e.toarray(d.querySelectorAll("*")).filter(function(a){return!!a[b]});i(d);for(var g=0;g<f.length;g++)i(f[g])}}}function k(a){for(var b=l(a),c=0;c<b.length;c++)new View(b[c])}function l(a){for(var b=[],c=0;c<a.length;c++)if(a[c].querySelectorAll)for(var d in m)b=b.concat(e.domquery(a[c],"["+d+"]"));return e.distinct(b),e.domsort(b)}View=function(a){function c(){p=!0,k([a])}function i(){delete a[b],o=e.nothing,a=e.nothing,n=e.nothing}function j(a){if("scope"in a)for(name in a.scope)name in q||(q[name]=a.scope[name]);"dispose"in a&&(n.dispose=a.dispose)}if(!(b in a)){var l=g(a);if(!l||l.bound){var n=this;a[b]=n;var o=d;e.readonly(n,"application",function(){return o}),e.readonly(n,"element",function(){return a}),e.readonly(n,"root",function(){return function(a){for(;g(a.element);)a=g(a.element);return a}(n)}),e.readonly(n,"parent",function(){return g(a)}),e.readonly(n,"children",function(){return h(n)});var p=!1;e.readonly(n,"bound",function(){return p}),n.listen=function(a,b){f.subscribe(a,b),n.dispose=function(){f.unsubscribe(b)}},Object.defineProperty(n,"dispose",{get:function(){return i},set:function(a){if(!e.is(a,"function"))throw"dispose must be a function";i=function(b){return function(){a(),b()}}(i)},configurable:!1,enumerable:!0});var q={view:n};e.readonly(n,"scope",function(){return n.parent?e.merge(n.parent.scope,q):e.copy(q)}),n.scan=function(){if(!p&&(!n.parent||n.parent.bound)){var b={};for(e in m)a.matches&&a.matches("["+e+"]")&&(b[e]=m[e]);for(var e in b)if(m[e].prescan&&m[e].prescan(n)===!1)return void(p=!1);for(var e in b)j(d.resolve(m[e].ctr,n.scope));c()}},Object.freeze(n),n.scan()}}};{var m=e.copy(c);new a(d.root,k,j,e)}k([d.root])}])}(),Application.extend(["application",function(a){function b(a,b,e,f,g,h,i){g=g?JSON.stringify(g):!1,f=f||function(){},e=e||function(){},i=i||{},h=h||{},h.Accept="application/json",g!==!1&&(h["Content-Type"]="application/json");var j=new XMLHttpRequest;j.open(a,b,i.async!==!1,i.user,i.pass);for(var k in h)j.setRequestHeader(k,h[k]);return i.mimeType&&j.overrideMimeType(i.mimeType),i.withCredentials===!0&&(j.withCredentials=!0),i.timeout&&(j.timeout=timeout),j.onreadystatechange=function(){if(4===this.readyState){var a=c(this),b=d(this.responseText);this.status<200||this.status>=400?f.call(a,b):e.call(a,b)}},j.ontimeout=function(){f({},c(j,!0))},g===!1?j.send():j.send(g),j.abort}function c(a,b){return{timeout:!!b,state:a.readyState,response:a.response,responseText:a.responseText,responseType:a.responseType,status:a.status,statusText:a.statusText,getHeaders:a.getAllResponseHeaders}}function d(a){try{return JSON.parse(a)}catch(b){return console.log(a),{parseError:b}}}var e={},f={},g={},h={};a.register.perResolve("http",["html",function(a){function c(a,b,c){var d={};for(var e in a)d[e]=a[e];for(var e in b)e in d||(d[e]=b[e]);for(var e in c)e in d||(d[e]=c[e]);return d}function d(a){return c(a,l,e)}function i(a){return c(a,m,f)}function j(a){return"string"==typeof a?a:c(a,n,g)}function k(a){return c(a,o,h)}var l={},m={},n={},o={};this.setGlobalHeader=function(a,b){e[a]=b},this.setGlobalConfig=function(a,b){f[a]=b},this.setGlobalParam=function(a,b){g[a]=b},this.setGlobalQuery=function(a,b){h[a]=b},this.setHeader=function(a,b){l[a]=b},this.setConfig=function(a,b){m[a]=b},this.setParam=function(a,b){n[a]=b},this.setQuery=function(a,b){o[a]=b},this.get=function(c,e,f,g,h,l){return b("get",a.formatUri(c,k(j(e))),f,g,!1,d(h),i(l))},this["delete"]=function(c,e,f,g,h,l){return b("delete",a.formatUri(c,k(j(e))),f,g,!1,d(h),i(l))},this.post=function(c,e,f,g,h,l){return b("post",a.formatUri(c,k({})),f,g,j(e),d(h),i(l))},this.patch=function(c,e,f,g,h,l){return b("patch",a.formatUri(c,k({})),f,g,j(e),d(h),i(l))},this.put=function(c,e,f,g,h,l){return b("put",a.formatUri(c,k({})),f,g,j(e),d(h),i(l))},Object.freeze(this)}])}]),function(){var a=document.createElement("div"),b=document.createElement("style");document.head.appendChild(b);var c={};Application.extend.register.perApp("html",["utilities","application",function(d,e){var f=this;f.encode=function(a){return a.indexOf('"')<0&&a.indexOf("'")<0&&a.indexOf("<")<0&&a.indexOf(">")<0?a:(a||"").toString().replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},f.parse=function(b){var c=[];try{a.innerHTML=b}catch(d){return!1}for(;a.firstChild;)c.push(a.firstChild),a.removeChild(a.firstChild);return c},f.getInputValue=function(a){if(a.matches("input[type=radio]")||a.matches("input[type=checkbox]"))return a.checked;if(a.matches("select")){for(var b=[],c=0;c<a.options.length;c++)a.options[c].selected&&b.push(a.options[c].value);return b.length>1?b:b[0]}return"value"in a?a.value:a.innerHTML||""},f.setInputValue=function(a,b){if(a.matches("input[type=radio]")||a.matches("input[type=checkbox]"))return void(a.checked=!!b);{if(!a.matches("select"))return"value"in a?void(a.value=b):void(a.innerHTML=f.encode((b||"").toString()));d.is(b,Array)||(b=[b]);for(var c=0;c<b.length;c++)for(var e=0;e<a.options.length;e++)a.options[e].checked=a.options[e].value===b[c]}},f.setStyle=function(a,d){if(!(a in c)){c[a]=d;var e="";for(var f in c)e=e+f+" "+c[f]+"\r\n";b.innerHTML=e}},f.removeClass=function(a,b){b=b.replace(/[^a-z0-9\-_]+/gi,"");var c=a.getAttribute("class")||"";c=c.replace(new RegExp("(\\s|^)"+b+"(\\s|$)","gi"),""),a.setAttribute("class",c.trim())},f.addClass=function(a,b){b=b.replace(/[^a-z0-9\-_]+/gi,"");var c=a.getAttribute("class")||"";c=c.replace(new RegExp("(\\s|^)"+b+"(\\s|$)","gi"),""),c=c+" "+b,a.setAttribute("class",c.trim())},f.hasClass=function(a,b){b=b.replace(/[^a-z0-9\-_]+/gi,"");var c=a.getAttribute("class")||"";return!!c.match(new RegExp("(\\s|^)"+b+"(\\s|$)","gi"))},f.toggleClass=function(a,b){f.hasClass(a,b)?f.removeClass(a,b):f.addClass(a,b)},f.indom=function(a){return d.indom(a)},f.formatParameters=function(a){if("string"==typeof a)return a;var b=[];for(var c in a){var e=(a[c]===d.nothing?"":a[c]).toString();b.push(encodeURIComponent(c)+"="+encodeURIComponent(e))}return b.join("&")},f.formatUri=function(a,b){return b?(d.is(b,"string")||(b=f.formatParameters(b)),b=b.replace(/^[&?]+/g,""),a.indexOf("?")>=0?a+"&"+b:a+"?"+b):a},f.parseQuery=function(a){for(var b={},c=(a||"").replace(/^\?+|^\&+|\&+$/g,"").split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(2===e.length){var f=decodeURIComponent(e[0]||""),g=decodeURIComponent(e[1]||"");f&&g&&("string"==typeof b[f]?b[f]=[b[f],g]:f in b?b[f].push(g):b[f]=g)}}return b},Object.freeze(f)}])}(),Application.extend.register.perApp("route",["utilities","html","broadcast",function(a,b,c){function d(){var a=f;f=e.current;for(var b=e.current,d=i[b.uri]||[],g=0;2>g;g++){for(var j=0;j<d.length;j++)d[j](b,a);d=h}c.send(e.channel,b)}var e=this;e.channel="Route.Updated",e.parse=function(a){a=(a||"").replace(/^#+/g,"");var c=a.split("?"),a=(c[0]||"").toLowerCase(),d=c[1]||"",e=b.parseQuery(c[1]||""),f={uri:a,params:d,data:e};return Object.freeze(f),f},a.readonly(e,"current",function(){return e.parse(window.location.hash)});var f=e.current,g={};a.readonly(e,"routes",function(){return a.copy(g)}),e.register=function(a,b){g[e.parse(a).uri]=b};var h=[],i={};e.subscribe=function(b,c){return c===a.nothing?void h.push(b):(i[c]=b[c]||[],void i[c].push(b))},e.unsubscribe=function(a){for(var b in i)i[b]=i[b].filter(function(b){return b!==a});h=h.filter(function(b){return b!==a})},e.navigate=function(a,c){window.history&&window.history.pushState?(window.history.pushState(null,null,"#"+b.formatUri(a,c)),d()):window.location.hash=b.formatUri(a,c)},window.onpopstate?window.onpopstate=d:window.addEventListener("hashchange",d),Object.freeze(e)}]),Application.extend.binding("data-routed",["view","route",function(a,b){var c=function(c,d){if(!d||c.uri!==d.uri){var e=b.routes[c.uri];if(!e)return void(a.element.innerHTML="");var f=new XMLHttpRequest;f.open("get",e,!0),f.onreadystatechange=function(){4===this.readyState&&(this.status<200||this.status>=400?a.element.innerHTML="":a.element.innerHTML=this.responseText)},f.send()}};b.subscribe(c),c(b.current)}]),function(){var a=" Template Model ";Application.extend.binding("data-template",["view","viewmodel manager",function(b,c){var d=b.element[a],e=c.surrogate(b,d);this.scope={viewmodel:e},delete b.element[a],b.element.removeAttribute("data-template")}],function(b){function c(b,c){var e=d.parse(i)[0];return e[a]=b,j.parentNode.insertBefore(e,c||j),{model:b,element:e}}if(a in b.element)return!0;var d=b.application.resolve("html"),e=b.application.resolve("utilities"),f=b.scope.viewmodel,g=b.element,h=g.getAttribute("data-template");g.setAttribute("data-template",""),g.removeAttribute("view-model");var i=g.outerHTML,j=document.createComment("Template Content");g.parentNode.insertBefore(j,g),g.parentNode.removeChild(g);var k=[],l=function(){var a=f.path(h);e.is(a,Array)||(a=[a]);var b=0;do{for(;b<k.length&&k[b].model!==a[b];){var d=k.splice(b,1)[0].element;d.parentNode.removeChild(d)}b>=k.length&&b<a.length&&k.push(c(a[b]))}while(++b<a.length)};return f.watch(h,l),l(),!1})}(),Application.extend.binding("data-view",["html",function(a){throw"view cannot be instantiated"}],function(a){var b=a.application.resolve("html"),c=a.element,d=c.getAttribute("data-view"),e=(a.application.resolve("utilities"),new XMLHttpRequest);return e.onreadystatechange=function(){if(4===this.readyState&&b.indom(c)){var a=document.createComment("view: "+d);c.parentNode.insertBefore(a,c),c.parentNode.removeChild(c);var e=b.parse(this.responseText);if(e)for(var f=0;f<e.length;f++)a.parentNode.insertBefore(e[f],a)}},e.open("get",d),e.send(),!1}),function(){var a="view-model",b=" ViewModel ",c={};Object.defineProperty(Application.extend,"viewmodel",{value:function(a,b){c[a]={ctr:b}},configurable:!1,enumerable:!0}),Application.extend(["viewmodel manager","application",function(a,b){b.viewmodel=function(b,c){a.register(b,c)},Object.freeze(b.viewmodel)}]),Application.extend.register.perApp("viewmodel manager",["utilities","application",function(a,d){function e(a){return a in i}function f(a){return e(a)&&!!i[a].ctr}function g(c,e){var f=c.element;f[b]=e,a.readonly(e,"view",function(){return c}),a.readonly(e,"parent",function(){return function(a){for(;a.parentNode&&a.parentNode!==d.root&&!(b in a);)a=a.parentNode;return a.parentNode?a.parentNode[b]||!1:!1}(f)}),a.readonly(e,"children",function(){for(var c=(a.toarray(f.querySelectorAll("*")).filter(function(a){return b in a&&a[b].parent===e})),d=[];c.length;)d.push(c.pop()[b]);return d});var g=[];a.constant(e,"watch",function(b,c){var d=a.watch(e,b,c),f=function(){g=g.filter(function(a){return a!==f}),d()};return g.push(f),f}),c.dispose=function(){for(;g.length;)g.pop()();g=a.nothing,f=a.nothing,c=a.nothing,e=a.nothing}}var h=this,i=a.copy(c);h.register=function(a,b){if(f(a))throw'View Model "'+a+'" already exists';for(e(a)||(i[a]={}),i[a].ctr=b;i[a].postponed&&i[a].postponed.length;)i[a].postponed.shift()()},h.prescan=function(a,b){return f(a)?!0:(e(a)||(i[a]={postponed:[]}),i[a].postponed.push(b.scan),!1)},h.init=function(a,b){if(!f(a))throw'View Model "'+a+'" not found';var c=d.resolve(i[a].ctr,b.scope);return c},h.convert=function(a,b){return g(a,b),d.Observable.convert(b),b},h.surrogate=function(a,b){var c={};return g(a,c),d.Observable.surrogate(b,c),c}}]),Application.extend.binding(a,["viewmodel manager","view",function(b,c){var d=c.element.getAttribute(a),e=b.init(d,c);b.convert(c,e),this.scope={viewmodel:e}}],function(b){var c=b.element.getAttribute(a),d=b.application.resolve("viewmodel manager");return d.prescan(c,b)})}(),Application.extend.binding("data-format",["view","viewmodel","utilities","html",function(a,b,c,d){function e(a){return a.replace(/^\{\{|\}\}$/g,"")}function f(){for(var f=g,i=0;i<h.length;i++){var j=h[i],k=b.path(e(j));for(k=k===c.nothing?"":k;f.indexOf(j)>=0;)f=f.replace(j,k)}k in a.element?a.element.value=f:a.element.innerHTML=d.encode(f)}var g=a.element.getAttribute("data-format")||"",h=g.match(/\{\{[^\}]+\}\}/g);if(h){for(var i=0;i<h.length;i++)b.watch(e(h[i]),f);f()}}]),Application.extend.binding("data-bind",["view","viewmodel","utilities","html",function(a,b,c,d){function e(){if(!j){k=!0,j=!1;var e=b.path(f);d.setInputValue(a.element,e===c.nothing?"":e),k=!1}}var f=a.element.getAttribute("data-bind")||!1;if(!f)throw"data-bind must be set to a property / path to watch";var g=f.split("."),h=g.pop(),i=g.join(".");if(h){for(var j=!1,k=!1,l=["click","keyup","change"],m=0;m<l.length;m++)try{a.element.addEventListener(l[m],function(){if(!k){j=!0,k=!1;var c=i?b.path(i):b;c[h]=d.getInputValue(a.element),j=!1}})}catch(n){}b.watch(f,e),e()}}]),Application.extend.binding("data-html",["view","viewmodel","html","utilities",function(a,b,c,d){function e(){var c=b.path(f);c=c===d.nothing?"":c,a.element.innerHTML=c}var f=a.element.getAttribute("data-html")||"";b.watch(f,e),e()}]),Application.extend.binding("data-src",["view","viewmodel","html",function(a,b,c){var d=a.element.getAttribute("data-src"),e=function(){var c=b.path(d)||"";a.element.setAttribute("src",c)};b.watch(d,e),e()}]),Application.extend.binding("data-href",["view","viewmodel","html",function(a,b,c){var d=a.element.getAttribute("data-href"),e=function(){var c=b.path(d)||"";a.element.setAttribute("href",c)};b.watch(d,e),e()}]),Application.extend.binding("data-title",["view","viewmodel","html",function(a,b,c){var d=a.element.getAttribute("data-title"),e=function(){var c=b.path(d)||"";a.element.setAttribute("title",c)};b.watch(d,e),e()}]),Application.extend.binding("data-show",["view","viewmodel","html",function(a,b,c){c.setStyle(".data-hide","{ display: none !important; }");var d=a.element.getAttribute("data-show"),e=function(){b.path(d)?c.removeClass(a.element,"data-hide"):c.addClass(a.element,"data-hide")};b.watch(d,e),e()}]),Application.extend.binding("data-hide",["view","viewmodel","html",function(a,b,c){c.setStyle(".data-hide","{ display: none !important; }");var d=a.element.getAttribute("data-hide"),e=function(){b.path(d)?c.addClass(a.element,"data-hide"):c.removeClass(a.element,"data-hide")};b.watch(d,e),e()}]),Application.extend.binding("data-class",["view","viewmodel","html",function(a,b,c){var d=a.element.getAttribute("data-class")||"",e=d.indexOf("{")>=0?!1:d,f=d.indexOf("{")<0?!1:d.replace(/^\{+|\}+$/g,"");if(e){var g=function(){var d=b.path(e)||"";c.addClass(a.element,d)};b.watch(e,g),g()}else if(f)for(var h=f.split(","),i=0;i<h.length;i++){var j=h[i].split(":");h[i]={"class":j[0].trim(),path:j[1].trim()},h[i].update=function(d){return function(){var e=b.path(d.path);e?c.addClass(a.element,d["class"]):c.removeClass(a.element,d["class"])}}(h[i]),b.watch(h[i].path,h[i].update),h[i].update()}}]),Application.extend.binding("data-submit",["view","viewmodel","utilities",function(a,b,c){var d=a.element.getAttribute("data-submit");a.element.addEventListener("submit",function(a){a.preventDefault();var e=b.path(d);if(c.is(e,"function"))return e.apply(b,arguments),!1})}]),Application.extend.binding("data-click",["view","viewmodel","utilities",function(a,b,c){var d=a.element.getAttribute("data-click");a.element.addEventListener("click",function(){var a=b.path(d);c.is(a,"function")&&a.apply(b,arguments)})}]),Application.extend.register.perApp("nav-service",["route",function(a){var b=this;b.navs={"":[{name:"Docs",uri:"#",view:"views/getting-started.html"},{name:"Downloads",uri:"#downloads",view:"views/downloads.html"},{name:"Source",uri:"https://github.com/datadink/curvy"}],"First Things First":[{name:"Getting started",uri:"#getting-started",view:"views/getting-started.html"},{name:"Why I made this",uri:"#why-curvy",view:"views/why-curvy.html"},{name:"Why I chose MVVM",uri:"#why-mvvm",view:"views/why-mvvm.html"}],"The Framework":[{name:"Application",uri:"#application",view:"views/application.html"},{name:"Bindings",uri:"#bindings",view:"views/bindings.html"},{name:"View Models",uri:"#viewmodels",view:"views/view-models.html"},{name:"Observables",uri:"#observables",view:"views/observables.html"}],Services:[{name:"broadcast",uri:"#broadcast",view:"views/broadcast.html"},{name:"http",uri:"#http",view:"views/http.html"},{name:"route",uri:"#route",view:"views/route.html"}],Utilities:[{name:"utilities",uri:"#utilities",view:"views/utilities.html"},{name:"html",uri:"#html",view:"views/html.html"},{name:"broadcast",uri:"#broadcast",view:"views/broadcast.html"}],Bindings:[{name:"data-bind",uri:"#data-bind",view:"views/data-bind.html"},{name:"data-class",uri:"#data-class",view:"views/data-class.html"},{name:"data-click",uri:"#data-click",view:"views/data-click.html"},{name:"data-format",uri:"#data-format",view:"views/data-format.html"},{name:"data-hide",uri:"#data-hide",view:"views/data-hide.html"},{name:"data-href",uri:"#data-href",view:"views/data-href.html"},{name:"data-html",uri:"#data-html",view:"views/data-html.html"},{name:"data-routed",uri:"#data-routed",view:"views/data-routed.html"},{name:"data-show",uri:"#data-show",view:"views/data-show.html"},{name:"data-src",uri:"#data-src",view:"views/data-src.html"},{name:"data-submit",uri:"#data-submit",view:"views/data-submit.html"},{name:"data-template",uri:"#data-template",view:"views/data-template.html"},{name:"data-title",uri:"#data-title",view:"views/data-title.html"},{name:"data-view",uri:"#data-view",view:"views/data-view.html"}]};for(var c in b.navs)for(var d=0;d<b.navs[c].length;d++){var e=b.navs[c][d];e.view&&a.register(e.uri.replace(/^#/g,""),e.view)}b.navigate=a.navigate}]),Application.extend.viewmodel("app",["nav-service",function(a){var b=this;b.navs={main:[],left:[]};for(var c in a.navs)c?b.navs.left.push({title:c,items:a.navs[c]}):b.navs.main=a.navs[c]}]);var myApp=new Application;